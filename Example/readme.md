# Example Data Files

This directory contains sample input files for testing the Molecular Feature Dimensionality Reduction scripts (using the Î±-Fe/H system dataset as an example).
[sample data](https://drive.google.com/drive/folders/1-dQ-Igwxy2YwtvoGy5jaYRVF0BeQ3n7Q?usp=sharing)

*   `function.data`: A sample feature file containing feature values for each atom.
*   `input.data`: A sample atomic structure file in n2p2 format, corresponding exactly to the structures in `function.data`. This file is used by the main script (if specified) to color points in the output plot based on chemical composition.

## How to Run
### Running the Dimensionality Reduction Analysis (`DV_LAE.py`)
Execute the `DV_LAE.py` script from the **parent directory** (the one containing `DV_LAE.py` itself) and point it to these example files using the command-line arguments.

**Example Command:**

```
python ../DV_LAE.py --feature function.data --structure input.data --outdir output --bins 25 --mode tsne --dist_mode 2
```

**Explanation:**

*   `python ../DV_LAE.py`: Runs the main script from one level up.
*   `--feature Example/function.data`: Specifies the path to the sample feature file.
*   `--structure Example/input.data`: Specifies the path to the sample structure file for coloring.
*   `--outdir Example/output`: Creates an `output` subdirectory within `Example` to store the results (plot, .npy files).
*   `--bins 25`: Uses 25 histogram bins (low value suitable for the small range in example features).
*   `--mode tsne`: Uses t-SNE for dimensionality reduction.
*   `--dist_mode 2`: Uses distance mode 2 (binary difference per bin).

Running this command should generate output files (like `...coords_2d.npy`, `...coords_2d.csv`, and an `.html` plot) inside the `Example/output/` directory. 

Now you have a self-contained example that users can run to understand the script's basic functionality and input/output formats.


### Running the Structure Filtering (utils/structure_filtering.py)
After running the analysis (DV_LAE.py), you can use the structure_filtering.py script to select a diverse subset of structures based on their distribution in the 2D plot generated in the previous step.
This script reads a *_coords_2d.npy file, divides the 2D space into a grid, selects a maximum number of points per grid cell, identifies the original indices of these points, and extracts the corresponding structures from the original structure file (Example/input.data in this case).

#### Prerequisites:
* You must have run DV_LAE.py first to generate the necessary *_coords_2d.npy file(s) in the Example/output/ directory.
* The filtering script structure_filtering.py should be located in a utils subdirectory relative to where you run the command (i.e., relative to the project's root directory).
~~~
python utils/structure_filtering.py Example/output/*_coords_2d.npy --input_structure Example/input.data --output_dir Example/filtered_output --interval 0.5 --max_per_cell 1 --plot
~~~

#### Explanation:
* python utils/structure_filtering.py: Runs the filtering script located in the utils directory.
* Example/output/*_coords_2d.npy: Specifies the path to the 2D coordinate file(s) generated by main.py. The wildcard * will process all matching files found. Adjust the path if necessary.
* --input_structure Example/input.data: Specifies the path to the original structure file from which to extract the selected structures.
* --output_dir Example/filtered_output: Creates a filtered_output subdirectory within Example to store the resulting filtered structure file(s).
* --interval 0.5: Sets the grid spacing for filtering in the 2D space. Adjust based on the spread of your data in the plot.
* --max_per_cell 1: Selects at most 1 structure from each grid cell.
* --plot: (Optional) Shows a matplotlib plot visualizing which points were selected from the grid for each coordinate file processed.

